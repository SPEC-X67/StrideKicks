{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block style %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #1e1e1e;
        color: #ffffff;
        margin: 0;
        padding: 0;
    }
    .header {
        background-color: #000000;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        width: 100%;
        z-index: 1000;
    }
    .sidebar {
        background-color: #1e1e1e;
        height: calc(100vh - 50px);
        width: 250px;
        position: fixed;
        top: 50px;
        left: 0;
        padding-top: 10px;
        overflow-y: auto;
    }
    .sidebar .nav-link {
        color: #ffffff;
        padding: 10px 15px;
        margin: 2px 10px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        transition: background-color 0.3s ease;
    }
    .sidebar .nav-link i {
        margin-right: 15px;
        width: 20px;
        font-size: 18px;
    }
    .sidebar .nav-link:hover, .sidebar .nav-link.active {
        background-color: #2c2c2c;
    }
    .main-content {
        margin-left: 250px;
        padding: 70px 20px 20px;
    }
    .chart-container {
        background-color: #2c2c2c;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }
    .metric-card {
        background-color: #ff9b9b;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        margin-bottom: 20px;
        color: #000000;
    }
    .recent-sales {
        background-color: #2c2c2c;
        border-radius: 10px;
        padding: 20px;
    }
    .sales-item {
        border-bottom: 1px solid #3c3c3c;
        padding: 10px 0;
    }
    .sales-item:last-child {
        border-bottom: none;
    }
</style>
{% endblock %}

{% block body %}
<header class="header">
    <h1 class="m-0">StrideKicks</h1>
    <div class="d-flex align-items-center">
        <span class="me-3">Welcome {{ first_name }}</span>
        <i class="fas fa-user-circle fa-lg"></i>
    </div>
</header>

<nav class="sidebar">
    <ul class="nav flex-column">
        <li class="nav-item">
            <a class="nav-link active" href="#">
                <i class="fas fa-th-large"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'customers' %}">
                <i class="fas fa-users"></i>
                <span>Customers</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'products' %}">
                <i class="fas fa-box"></i>
                <span>Products</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'orders' %}">
                <i class="fas fa-shopping-cart"></i>
                <span>Orders</span>
            </a>
        </li>        
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fas fa-image"></i>
                <span>Banner Management</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fas fa-ticket-alt"></i>
                <span>Coupon Management</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fas fa-chart-line"></i>
                <span>Sales Report</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'brand' %}">
                <i class="fas fa-briefcase"></i>
                <span>Brand</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'category' %}">
                <i class="fas fa-tags"></i>
                <span>Category</span>
            </a>
        </li>
    </ul>
    <ul class="nav flex-column mt-auto" style="position: absolute; bottom: 20px; width: 100%;">
        <li class="nav-item">
            <a class="nav-link" href="{% url 'settings' %}">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">
                <form action="{% url 'admin_logout' %}" method="post">
                    {% csrf_token %}
                    <button class="btn btn-outline-primary">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </button>
                </form>
            </a>
        </li>
    </ul>
</nav>

    <main class="main-content">
        <div class="chart-container">
            <canvas id="salesChart"></canvas>
        </div>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <div class="row g-4">
            <div class="col-md-4">
                <div class="metric-card">
                    <h6 class="mb-2">Total Sales</h6>
                    <h3 class="mb-0">₹ 55,000</h3>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card">
                    <h6 class="mb-2">Total Orders</h6>
                    <h3 class="mb-0">1,500</h3>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card">
                    <h6 class="mb-2">Users</h6>
                    <h3 class="mb-0">1,013</h3>
                </div>
            </div>
        </div>

        <div class="recent-sales mt-4">
            <h5 class="mb-4">Recent Sales</h5>
            <div class="sales-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>Oliver Bennett</strong>
                    <div class="text-muted small">3 minutes ago</div>
                </div>
                <div>₹299.00</div>
            </div>
            <div class="sales-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>Amelia Carter</strong>
                    <div class="text-muted small">10 minutes ago</div>
                </div>
                <div>₹429.00</div>
            </div>
            <div class="sales-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>Sophia Reed</strong>
                    <div class="text-muted small">30 minutes ago</div>
                </div>
                <div>₹510.00</div>
            </div>
            <div class="sales-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>Ethan Harper</strong>
                    <div class="text-muted small">1 hr ago</div>
                </div>
                <div>₹799.00</div>
            </div>
            <div class="sales-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>Mia Foster</strong>
                    <div class="text-muted small">2 hrs ago</div>
                </div>
                <div>₹699.00</div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('salesChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Sales',
                    data: [12000, 19000, 15000, 25000, 22000, 30000, 35000, 40000, 45000, 50000, 55000, 60000],
                    backgroundColor: '#3498db',
                    borderRadius: 5,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#3c3c3c'
                        },
                        ticks: {
                            color: '#ffffff'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#ffffff'
                        }
                    }
                }
            }
        });
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const navLinks = document.querySelectorAll('.sidebar .nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });
    });
</script>
{% endblock %}
